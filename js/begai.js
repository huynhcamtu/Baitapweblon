const data = [{
        "id": 1,
        "name": "Áo Polo Pique Nữ Basic WPO 2012",
        "price": "199.000",
        "color": ["xanh mint", "đen"],
        "sizes": ["45kg", "48kg", "51kg", "54kg", "57kg"],
        "characteristists": [
            "- Áo polo pique cơ bản với điểm nhấn bo cổ dệt jacquard nổi gân tinh tế. Form áo regular, vừa với người giúp vóc dáng người mặc gọn gàng, dễ phối đồ cho các cô gái năng động.",
            "- Chất liệu: Pique 70% Cotton, 25% Polyester, 5% Spandex",
            "- Form áo: Slim",
            "- Sản xuất: Việt Nam"
        ],
        "details": "../imgs/begai/h1.webp"
    },
    {
        "id": 2,
        "name": "Áo Khoác Nữ Dù Trượt Nước Phối Màu WOP 2048",
        "price": "469.000",
        "color": ["Đỏ hồng", "Xanh da trời"],
        "sizes": ["51g", "54kg", "58kg"],
        "characteristists": [
            "- Áo Khoác Nữ Dù Trượt Nước Phối Màu WOP 2048 với form dáng đặc biệt với phần tay áo vừa vặn của form Regular, phần thân được thiết kế rộng rãi của form Relax tạo cảm giác thoải mái và tăng tính thời trang cho sản phẩm.. Khả năng trượt nước nhẹ, cản gió phù hợp với các hoạt động đi làm, đi chơi, đi du lịch...",
            "- Chất liệu: Dù 100% Polyester",
            "- Form dáng: Regular + Relax"
        ],
        "details": "../imgs/begai/h2.webp"
    },
    {
        "id": 3,
        "name": "Áo Khoác Nữ UV Pro Windbreaker WOK 2058",
        "price": "449.000",
        "color": ["Đỏ hồng", "Trắng"],
        "sizes": ["51kg", "54kg", "58kg"],
        "characteristists": [
            "- Áo Khoác Nữ UV Pro Windbreaker WOK 2058 Sản phẩm được làm từ 100% sợi polyester tái chế nên rất bền chắc, nhanh khô, độ bền màu cao, có khả năng chống nắng vượt trội với chỉ số UPF 50++ và khả năng kháng tia UV tới 98%, nhờ tính chất kháng tia UV tự nhiên của sợi polyester cùng kiểu dệt 2 lớp cải tiến",
            "- Áo có lỗ thoát khí 2 bên sườn giúp thoáng khí.",
            "- Thiết kế 2 túi dây kéo an toàn thân trước, 2 túi trong tiện lợi đựng đồ."
        ],
        "details": "../imgs/begai/h3.webp"
    },
    {
        "id": 4,
        "name": "Áo Thun Nữ Zodiac Vibe WTS 2400",
        "price": "299.000",
        "color": ["Hồng", "Xanh da trời"],
        "sizes": ["45kg", "48kg", "51kg", "54kg", "58kg"],
        "characteristists": [
            "- Áo thun in hình 12 cung hoàng đạo, mang đến phong cách cá tính và sự kết nối với bản thân, hoàn hảo cho những tín đồ yêu thích chiêm tinh và thời trang. Form relax mang đến sự thoải mái tối đa cho người mặc.",
            "- Chất Liệu : SINGLE 2C COTTON 210GSM",
            "- Sản xuất: Việt Nam"
        ],
        "details": "../imgs/begai/h4.webp"
    },
    {
        "id": 5,
        "name": "Áo Khoác Nữ Jean Lệch Tà WOF 2008",
        "price": "419.000",
        "color": ["Hồng", "Xanh da trời"],
        "sizes": ["48kg", "51kg", "54kg"],
        "characteristists": [
            "- Form oversize năng động với điểm nhấn xếp lai, lệch tà trước sau.",
            "- Form dáng: Oversize",
            "- Sản xuất: Việt Nam"
        ],
        "details": "../imgs/begai/h5.jpg"
    },
    {
        "id": 6,
        "name": "Áo Khoác Nữ Trượt Nước Logo Phản Quang WOP 2074",
        "price": "449.000",
        "color": ["Hồng", "Be"],
        "sizes": ["48kg", "51kg", "54kg", "58kg", "60kg"],
        "characteristists": [
            "- Áo khoác dù trượt nước, chất vải dù có xớ mịn, trượt nước bề mặt và có chống thấm ngược vào trong. Được lót 1 lớp vải lưới thoáng khí và thân sau có thiết kế lỗ nhỏ thoát hơi. 2 túi có dây kéo ở thân trước an toàn đựng đồ, 1 túi cơi ở mặt trong. Dây kéo chống thấm, bo lai dạng dây rút có con chặn có thể điều chỉnh độ rộng lai theo sở thích  người mặc. Logo thân trước và logo X thân sau IN ÉP PHẢN QUANG",
            "- Chất liệu: Dù gân mờ 100% Polyester",
            "- Form dáng: REGULAR MIX RELAX"
        ],
        "details": "../imgs/begai/h6.webp"
    },
    {
        "id": 7,
        "name": "Áo Khoác Nữ Hoodie Big Signal WHO 2021",
        "price": "269.000",
        "color": ["Vàng", "Hồng"],
        "sizes": ["48kg", "51kg", "54kg", "58kg", "60kg"],
        "characteristists": [
            "- Áo hoodie chất liệu vải Terry fabric in logo nổi to bảng ở lưng cùng với thiết kế trẻ trung, mang đến phong cách năng động và cá tính, giúp người mặc tự tin thể hiện bản sắc riêng qua trang phục, là sản phẩm dành cho mùa thu đông, khách hàng sẽ có thể nâng cao cá tính của mình.",
            "- Chất liệu: FrenchTerry Fabric",
            "- Form dáng: Oversize."
        ],
        "details": "../imgs/begai/h7.jpg"
    },
    {
        "id": 8,
        "name": "Áo Thun Nữ Slim Basic Cổ Tròn WTS 2325",
        "price": "179.500",
        "color": ["Hồng nhạt"],
        "sizes": ["48kg", "51kg", "54kg", "57kg", "60kg"],
        "characteristists": [
            "- Chất liệu thun cotton mềm mịn tạo cảm giác thoải mái, dễ dàng phối được với nhiều phong cách khác nhau. Form slim fit tôn dáng người mặc.",
            "- Chất Liệu : 86.6% Cotton + 13.4% Polyester, 180 GSM.",
            "- Màu Sắc : Đen, Trắng, Xám Micro Chip,Xanh Infinity, Nâu nhạt"
        ],
        "details": "../imgs/begai/h8.webp"
    },
    {
        "id": 9,
        "name": "Áo Thun Nữ Graphic In Outside WTS 2309",
        "price": "229.000",
        "color": ["Hồng nhạt"],
        "sizes": ["48kg", "51kg", "54kg", "57kg", "60kg"],
        "characteristists": [
            "- Áo Thun Nữ Graphic In Outside WTS 2309 với hình in độc đáo, lạ mắt. Chất liệu thun cotton mềm mịn tạo cảm giác thoải mái, dễ dàng phối được với nhiều phong cách khác nhau.",
            "- Chất Liệu : 100% Cotton - 210 GSM.",
            "- Sản xuất: Việt Nam"
        ],
        "details": "../imgs/begai/h9.webp"
    },
];

$(document).ready(function() {
    showProducts();
    $('#option1, #option2').change(function() {
        var filterBelow200k = $('#option1').is(':checked');
        var filterAbove200k = $('#option2').is(':checked');
        var minPrice = null;
        var maxPrice = null;
        if (filterBelow200k) {
            minPrice = 0;
            maxPrice = 199999;
        } else if (filterAbove200k) {
            minPrice = minPrice === null ? 200000 : minPrice;
            maxPrice = Infinity;
        }
        var filteredData = filterProducts(minPrice, maxPrice);
        var filteredHTML = '';
        if (filterBelow200k && filterAbove200k) {
            minPrice = 0;
            maxPrice = Infinity;
            filteredData = filterProducts(minPrice, maxPrice);
        } else if (!filterAbove200k && !filterBelow200k) {
            filteredData = data
        }
        filteredData.forEach(function(product) {
            filteredHTML += `<div data-id="${product.id}" class="showMoreInformation borderProducts_medium col-3">
        <div class="products_medium">
            <img class="img-fluid" src="${product.details}" alt="">
        </div>
        <p class="content_medium">
            ${product.name}
        </p>
        <p class="price_medium" style="font-weight:bold;">${product.price} <u>đ</u></p>
    </div>`;
        });
        $('#listProducts_nu').html(filteredHTML);
    });


    $('#option3, #option4, #option5,#option6,#option7,#option8').change(function() {
        var o3 = $('#option3').is(':checked');
        var o4 = $('#option4').is(':checked');
        var o5 = $('#option5').is(':checked');
        var o6 = $('#option6').is(':checked');
        var o7 = $('#option7').is(':checked');
        var o8 = $('#option8').is(':checked');
        var sizes = [];
        if (o3) sizes.push("1Y-9-11kg");
        if (o4) sizes.push("2Y-11-12kg");
        if (o5) sizes.push("3Y-12-13kg");
        if (o6) sizes.push("4Y-14-16kg");
        if (o7) sizes.push("5Y-17-19kg");
        if (o8) sizes.push("6Y-19-21kg");

        var filteredData = [];
        if (sizes.length > 0) {
            sizes.forEach(function(size) {
                filteredData = filteredData.concat(filterProductsSizes(size));
            });
        } else {
            filteredData = data;
        }

        var filteredHTML = '';
        filteredData.forEach(function(product) {
            filteredHTML += `<div data-id="${product.id}" class="showMoreInformation borderProducts_medium col-3">
            <div class="products_medium">
                <img class="img-fluid" src="${product.details}" alt="">
            </div>
            <p class="content_medium">
                ${product.name}
            </p>
            <p class="price_medium" style="font-weight:bold;">${product.price} <u>đ</u></p>
        </div>
        `;

        });
        $('#listProducts_nu').html(filteredHTML);
    });

    $('#sort').change(function() {
        var selectedOption = $(this).val();
        switch (selectedOption) {
            case 'alpha-asc':
                sortByNameAZ();
                break;
            case 'alpha-desc':
                sortByNameZA();
                break;
            case 'price-asc':
                sortByPriceAsc();
                break;
            case 'price-desc':
                sortByPriceDesc();
                break;
        }
    });


    // lấy dữ liệu
    $('.showMoreInformation').on('click', function() {
        var productId = $(this).data('id');
        for (const [index, item] of data.entries()) {
            if (item.id === productId) {
                localStorage.setItem('selectedProduct', JSON.stringify(data[index]));
                window.location.href = '../html/item.html';
                break;
            }
        }
    });
})


// Filterrrrrrrrrrrrrrrrrrr
function filterProducts(minPrice, maxPrice) {
    var filteredProducts = data.filter(function(product) {
        var cleanPriceString = product.price.replace(/\./g, '');
        var a = parseInt(cleanPriceString);
        return a >= minPrice && a <= maxPrice;
    });
    return filteredProducts;
}

function hasSize(product, size) {
    return product.sizes.includes(size);
}

function filterProductsSizes(size) {
    var filteredProducts = data.filter(function(product) {
        return hasSize(product, size);
    });
    return filteredProducts;
}


// SORTTTTTTTTTTT
function sortByNameAZ() {
    data.sort(function(a, b) {
        return a.name.localeCompare(b.name);
    });
    sortShowProduct();
}

function sortByNameZA() {
    data.sort(function(a, b) {
        return b.name.localeCompare(a.name);
    });
    sortShowProduct();
}

function sortByPriceAsc() {
    data.sort(function(a, b) {
        return parseInt(a.price.replace(/\./g, '')) - parseInt(b.price.replace(/\./g, ''));
    });
    sortShowProduct();
}

function sortByPriceDesc() {
    data.sort(function(a, b) {
        return parseInt(b.price.replace(/\./g, '')) - parseInt(a.price.replace(/\./g, ''));
    });
    sortShowProduct();
}

function sortShowProduct() {
    var productHTML = '';
    data.forEach(function(product) {
        productHTML += `
        <div data-id="${product.id}" class="showMoreInformation borderProducts_medium col-3">
            <div class="products_medium">
                <img class="img-fluid" src="${product.details}" alt="">
            </div>
            <p class="content_medium">
                ${product.name}
            </p>
            <p class="price_medium" style="font-weight:bold;">${product.price} <u>đ</u></p>
        </div>
`;
    });
    productHTML = productHTML.replace(/<b>/g, '').replace(/<\/b>/g, '');
    $('#listProducts_nu').empty().append(productHTML);
}

function showProducts() {
    data.forEach(function(product) {
        let them = `
        <div data-id="${product.id}" class="showMoreInformation borderProducts_medium col-3">
        <div class="products_medium">
            <img class="img-fluid" src="${product.details}" alt="">
        </div>
        <p class="content_medium">
            ${product.name}
        </p>
        <p class="price_medium" style="font-weight:bold;">${product.price} <u>đ</u></p>
    </div>
        `
        $("#listProducts_nu").append(them);
    });
}