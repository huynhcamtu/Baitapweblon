const data = [{
        "id": 1,
        "name": "Áo Khoác Thun UV Nam Helios MOK 1054",
        "price": "449.000",
        "color": ["Xanh"],
        "sizes": ["65kg", "68kg", "71kg", "74kg", "77kg", "80kg"],
        "characteristists": [
            "- Sản phẩm áo khoác chống nắng có chỉ số chống UPF 50+, phản xạ đến 98% tia UV nhờ vào cấu trúc sợi Polyester có khả năng chống nắng tự nhiên. Bề mặt từ vải xược, thiết kế với logo đặc trưng và chi tiết nhấn eo phản quang, đảm bảo an toàn trong điều kiện ánh sáng yếu.",
            "- Chất liệu : Thành phần TC 60.49% Poly +39.51 %cotton 260gsm",
            "- Chỉ số UPF: 50+, phản xạ 98% tia UVm",
            "- Sản xuất: Việt Nam"
        ],
        "details": "../imgs/betrai/h1.jpg"
    },
    {
        "id": 2,
        "name": "Áo Khoác Thun UV Nam Cổ Đứng Helios MOK 1055",
        "price": "419.000",
        "color": ["Xanh nhạt"],
        "sizes": ["65", "68kg", "71kg", "74kg", "78kg", "80kg"],
        "characteristists": [
            "- sản phẩm áo khoác chống nắng có chỉ số chống UPF 50+, phản xạ đến 98% tia UV nhờ vào cấu trúc sợi Polyester có khả năng chống nắng tự nhiên. Bề mặt từ vải xược, thiết kế với logo đặc trưng và chi tiết nhấn eo phản quang, đảm bảo an toàn trong điều kiện ánh sáng yếu.",
            "- Chất liệu : Thành phần TC 60.49% Poly +39.51 %cotton 260gsm",
            "- Chỉ số UPF: 50+, phản xạ 98% tia UV ",
            "- Sản xuất: Việt Nam"
        ],
        "details": "../imgs/betrai/h2.jpg"
    },
    {
        "id": 3,
        "name": "Áo Thun Nam The Only Best Energy MTS 1402",
        "price": "149.000",
        "color": ["Xanh", "Trắng"],
        "sizes": ["65", "68kg", "71kg", "74kg", "78kg", "80kg"],
        "characteristists": [
            "- Áo thun mang đến phong cách trẻ trung và hiện đại, với nhiều kiểu dáng phù hợp cho cả nam, nữ và trẻ em. Sản phẩm có màu sắc mới lạ, phù hợp với tông da người Châu Á. Đây sẽ là lựa chọn tuyệt vời cho các gia đình trong dịp Noel sắp tới.",
            "- Chất Liệu : SINGLE 2C 100% COTTON 210 GSM",
            "- Sản xuất: Việt Nam"
        ],
        "details": "../imgs/betrai/h3.webp"
    },
    {
        "id": 4,
        "name": "Quần Dài Nam Jogger Thun Vải 2 Da Airlayer MPA 1009",
        "price": "255.550",
        "color": ["Xám", "Đen"],
        "sizes": ["65", "68kg", "71kg", "74kg", "78kg", "80kg"],
        "characteristists": [
            "- Một trong những item không thể thiếu trong tủ đồ thu đông, với chất liệu thun 2 da mềm mịn phù hợp với các hoạt động ngoài trời, thể thao, đi chơi, du lịch. Chất liệu thun 2 da có 15% Rayon giúp bề mặt vải có độ mềm mướt khi chạm vào và 5% Spandex co giãn thoải mái.",
            "- Chất liệu: Thun 2 da,  80% Polyester + 15% Rayon + 5% Spandex, 300 GSM.",
            "- Form dáng: Jogger Regular",
            "- Sản xuất: Việt Nam"
        ],
        "details": "../imgs/betrai/h5.webp"
    },
    {
        "id": 5,
        "name": "Áo Khoác Nam Dù Trượt Nước Emboss Hoa Văn MOP 1038",
        "price": "419.000",
        "color": ["Kem", "Đen"],
        "sizes": ["65", "68kg", "71kg", "74kg", "78kg", "80kg"],
        "characteristists": [
            "- Phần túi áo được thiết kế trong – ngoài rộng rãi cùng phần dây kéo chắc chắn, tiện dụng. Khả năng trượt nước nhẹ, cản gió phù hợp với các hoạt động đi làm, đi chơi, đi du lịch...",
            "- Chất liệu: Dù trượt nước Emboss 100% Polyester                                                                               ",
            "- Form dáng: New Regular + Relax",
            "- Sản xuất: Việt Nam"
        ],
        "details": "../imgs/betrai/h4.webp"
    },
    {
        "id": 6,
        "name": "Áo Thun Nam Basic Slim Fit Cổ Tròn MTS 1261",
        "price": "198.000",
        "color": ["Đỏ", "Xanh"],
        "sizes": ["65", "68kg", "71kg", "74kg", "78kg", "80kg"],
        "characteristists": [
            "- Áo thun cổ tim vải đốm, với form slim gọn gàng giúp tôn dáng hơn. Bộ màu đa dạng cho bạn lựa chọn. Sản phẩm có thể mix & match với đa dạng các bottom khác nhau tạo phong cách năng động hơn.",
            "- Chất liệu: Thun CVC vải đốm, thành phần 60% Cotton, 40% Polyester, trọng lượng 180gsm ",
            "- Form: Slim."
        ],
        "details": "../imgs/betrai/h6.webp"
    },
    {
        "id": 7,
        "name": "Áo Hoodie Nam Basic MHO 1020",
        "price": "299.000",
        "color": ["đen", "Trắng"],
        "sizes": ["65", "68kg", "71kg", "74kg", "78kg", "80kg"],
        "characteristists": [
            "- Chất liệu: Thun 2 da,  80% Polyester + 15% Rayon + 5% Spandex, 300GSM.",
            "- Form dáng: Oversize.",
        ],
        "details": "../imgs/betrai/h7.webp"
    },
    {
        "id": 8,
        "name": "Áo Khoác Nam Regular Fit Anti UV MOK 1020",
        "price": "329.000",
        "color": ["Cam", "Xanh nhạt"],
        "sizes": ["65", "68kg", "71kg", "74kg", "78kg", "80kg"],
        "characteristists": [
            "- Sản phẩm có chỉ số chống UV UPF 50+, cản được 98% tia UV tiếp xúc với áo làm giảm khả năng tổn hại làn da từ tia cực tím. Màu sắc đa dạng và thời trang cùng với form dáng gọn gàng, di chuyển thuận lợi. Hệ túi trong rộng rãi và túi ngoài có khóa kéo an toàn.",
            "- Chất liệu :Vải Tricot UV, thành phần 60% Cotton - 40% Polyester, trọng lượng 240GSM",
            "- Sản xuất: Việt Nam",
        ],
        "details": "../imgs/betrai/h8.webp"
    },
    {
        "id": 9,
        "name": "Áo Thun Nam Typo Adventure Map MTS 1374",
        "price": "199.000",
        "color": ["Xanh Coban", "Vàng"],
        "sizes": ["65", "68kg", "71kg", "74kg", "78kg", "80kg"],
        "characteristists": [
            "- Với chất liệu 100% cotton mềm mại, đứng form và thấm hút mồ hôi tốt mang đến sự thoải mái trong vận động, thích hợp trong thời tiết đầu mùa Hè.",
            "- Chất Liệu : SINGLE 2C 100%COTTON 210GSM",
            "- Form : Regular",
        ],
        "details": "../imgs/betrai/h9.webp"
    },
];

$(document).ready(function() {
    showProducts();

    $('#option1, #option2').change(function() {
        var filterBelow200k = $('#option1').is(':checked');
        var filterAbove200k = $('#option2').is(':checked');
        var minPrice = null;
        var maxPrice = null;
        if (filterBelow200k) {
            minPrice = 0;
            maxPrice = 199999;
        } else if (filterAbove200k) {
            minPrice = minPrice === null ? 200000 : minPrice;
            maxPrice = Infinity;
        }
        var filteredData = filterProducts(minPrice, maxPrice);
        var filteredHTML = '';
        if (filterBelow200k && filterAbove200k) {
            minPrice = 0;
            maxPrice = Infinity;
            filteredData = filterProducts(minPrice, maxPrice);
        } else if (!filterAbove200k && !filterBelow200k) {
            filteredData = data
        }
        filteredData.forEach(function(product) {
            filteredHTML += `<div data-id="${product.id}" class="showMoreInformation borderProducts_medium col-3">
        <div class="products_medium">
            <img class="img-fluid" src="${product.details}" alt="">
        </div>
        <p class="content_medium">
            ${product.name}
        </p>
        <p class="price_medium" style="font-weight:bold;">${product.price} <u>đ</u></p>
    </div>`;
        });
        $('#listProducts_nam').html(filteredHTML);
    });


    $('#option3, #option4, #option5,#option6,#option7,#option8').change(function() {
        var o3 = $('#option3').is(':checked');
        var o4 = $('#option4').is(':checked');
        var o5 = $('#option5').is(':checked');
        var o6 = $('#option6').is(':checked');
        var o7 = $('#option7').is(':checked');
        var o8 = $('#option8').is(':checked');
        var sizes = [];
        if (o3) sizes.push("1Y-9-11kg");
        if (o4) sizes.push("2Y-11-12kg");
        if (o5) sizes.push("3Y-12-13kg");
        if (o6) sizes.push("4Y-14-16kg");
        if (o7) sizes.push("5Y-17-19kg");
        if (o8) sizes.push("6Y-19-21kg");

        var filteredData = [];
        if (sizes.length > 0) {
            sizes.forEach(function(size) {
                filteredData = filteredData.concat(filterProductsSizes(size));
            });
        } else {
            filteredData = data;
        }

        var filteredHTML = '';
        filteredData.forEach(function(product) {
            filteredHTML += `<div data-id="${product.id}" class="showMoreInformation borderProducts_medium col-3">
        <div class="products_medium">
            <img class="img-fluid" src="${product.details}" alt="">
        </div>
        <p class="content_medium">
            ${product.name}
        </p>
        <p class="price_medium" style="font-weight:bold;">${product.price} <u>đ</u></p>
    </div>`;
        });
        $('#listProducts_nam').html(filteredHTML);
    });

    $('#sort').change(function() {
        var selectedOption = $(this).val();
        switch (selectedOption) {
            case 'alpha-asc':
                sortByNameAZ();
                break;
            case 'alpha-desc':
                sortByNameZA();
                break;
            case 'price-asc':
                sortByPriceAsc();
                break;
            case 'price-desc':
                sortByPriceDesc();
                break;
        }
    });



    // lấy dữ liệu
    $('.showMoreInformation').on('click', function() {
        var productId = $(this).data('id');
        for (const [index, item] of data.entries()) {
            if (item.id === productId) {
                localStorage.setItem('selectedProduct', JSON.stringify(data[index]));
                window.location.href = '../html/item.html';
                break;
            }
        }
    });
})

// Filterrrrrrrrrrrrrrrrrrr
function filterProducts(minPrice, maxPrice) {
    var filteredProducts = data.filter(function(product) {
        var cleanPriceString = product.price.replace(/\./g, '');
        var a = parseInt(cleanPriceString);
        return a >= minPrice && a <= maxPrice;
    });
    return filteredProducts;
}

function hasSize(product, size) {
    return product.sizes.includes(size);
}

function filterProductsSizes(size) {
    var filteredProducts = data.filter(function(product) {
        return hasSize(product, size);
    });
    return filteredProducts;
}



// SORTTTTTTTTTTT
function sortByNameAZ() {
    data.sort(function(a, b) {
        return a.name.localeCompare(b.name);
    });
    sortShowProduct();
}

function sortByNameZA() {
    data.sort(function(a, b) {
        return b.name.localeCompare(a.name);
    });
    sortShowProduct();
}

function sortByPriceAsc() {
    data.sort(function(a, b) {
        return parseInt(a.price.replace(/\./g, '')) - parseInt(b.price.replace(/\./g, ''));
    });
    sortShowProduct();
}

function sortByPriceDesc() {
    data.sort(function(a, b) {
        return parseInt(b.price.replace(/\./g, '')) - parseInt(a.price.replace(/\./g, ''));
    });
    sortShowProduct();
}

function sortShowProduct() {
    var productHTML = '';
    data.forEach(function(product) {
        productHTML += `
        <div data-id="${product.id}" class="showMoreInformation borderProducts_medium col-3">
        <div class="products_medium">
            <img class="img-fluid" src="${product.details}" alt="">
        </div>
        <p class="content_medium">
            ${product.name}
        </p>
        <p class="price_medium" style="font-weight:bold;">${product.price} <u>đ</u></p>
    </div>
`;
    });
    productHTML = productHTML.replace(/<b>/g, '').replace(/<\/b>/g, '');
    $('#listProducts_nam').empty().append(productHTML);
}

function showProducts() {
    data.forEach(function(product) {
        let them = `
                        <div data-id="${product.id}" class="showMoreInformation borderProducts_medium col-3">
        <div class="products_medium">
            <img class="img-fluid" src="${product.details}" alt="">
        </div>
        <p class="content_medium">
            ${product.name}
        </p>
        <p class="price_medium" style="font-weight:bold;">${product.price} <u>đ</u></p>
    </div>
        `
        $("#listProducts_nam").append(them);
    });
}